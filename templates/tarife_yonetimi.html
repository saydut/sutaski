{% extends "base.html" %}

{% block title %}Fiyat Tarifeleri - Süt Takip Sistemi{% endblock %}

{% block content %}
<div class="container mx-auto">
    <h2 class="text-3xl font-semibold mb-6">Fiyat Tarife Yönetimi</h2>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        
        <!-- Süt Fiyat Tarifeleri -->
        <div class="card">
            <div class="card-body">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-semibold">Süt Fiyat Tarifeleri</h3>
                    <button id="open-add-sut-tarife-modal-btn" class="btn-primary-filled">
                        <i class="fas fa-plus mr-2"></i> Yeni Ekle
                    </button>
                </div>
                <div class="overflow-x-auto">
                    <table class="min-w-full">
                        <thead class="bg-gray-50 dark:bg-gray-700">
                            <tr>
                                <th class="table-header">Başlangıç Tarihi</th>
                                <th class="table-header">Alış Fiyatı (Litre)</th>
                                <th class="table-header">Satış Fiyatı (Litre)</th>
                                <th class="table-header">İşlemler</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y dark:divide-gray-700" id="sut-tarife-table-body">
                            <!-- JS ile doldurulacak -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Yem Fiyat Tarifeleri -->
        <div class="card">
            <div class="card-body">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-semibold">Yem Fiyat Tarifeleri</h3>
                    <button id="open-add-yem-tarife-modal-btn" class="btn-success-filled">
                        <i class="fas fa-plus mr-2"></i> Yeni Ekle
                    </button>
                </div>
                 <div class="overflow-x-auto">
                    <table class="min-w-full">
                        <thead class="bg-gray-50 dark:bg-gray-700">
                            <tr>
                                <th class="table-header">Yem Tipi</th>
                                <th class="table-header">Alış Fiyatı (Birim)</th>
                                <th class="table-header">Satış Fiyatı (Birim)</th>
                                <th class="table-header">İşlemler</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y dark:divide-gray-700" id="yem-tarife-table-body">
                            <!-- JS ile doldurulacak -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Süt Tarife Modalı -->
<div id="sut-tarife-modal" class="modal-backdrop">
    <div class="modal-container">
        <div class="modal-header">
            <h3 class="modal-title" id="sut-tarife-modal-title">Yeni Süt Tarifesi</h3>
            <button class="modal-close-btn" data-modal-id="sut-tarife-modal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <form id="sut-tarife-form">
            <input type="hidden" id="sut-tarife-id" name="tarife_id">
            <div class="modal-body">
                <div class="mb-4">
                    <label for="sut-baslangic-tarihi" class="block text-sm font-medium mb-2">Geçerlilik Başlangıç Tarihi</label>
                    <input type="date" id="sut-baslangic-tarihi" name="baslangic_tarihi" class="input-field" required>
                </div>
                <div class="mb-4">
                    <label for="sut-alis-fiyati" class="block text-sm font-medium mb-2">Alış Fiyatı (Litre Başına)</label>
                    <input type="number" step="0.01" id="sut-alis-fiyati" name="alis_fiyati" class="input-field" required>
                </div>
                <div class="mb-4">
                    <label for="sut-satis-fiyati" class="block text-sm font-medium mb-2">Satış Fiyatı (Litre Başına)</label>
                    <input type="number" step="0.01" id="sut-satis-fiyati" name="satis_fiyati" class="input-field" required>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" data-modal-id="sut-tarife-modal">İptal</button>
                <button type="submit" class="btn-primary-filled">Kaydet</button>
            </div>
        </form>
    </div>
</div>

<!-- Yem Tarife Modalı -->
<div id="yem-tarife-modal" class="modal-backdrop">
    <div class="modal-container">
        <div class="modal-header">
            <h3 class="modal-title" id="yem-tarife-modal-title">Yeni Yem Tarifesi</h3>
            <button class="modal-close-btn" data-modal-id="yem-tarife-modal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <form id="yem-tarife-form">
            <input type="hidden" id="yem-tarife-id" name="tarife_id">
            <div class="modal-body">
                <div class="mb-4">
                    <label for="yem-tipi" class="block text-sm font-medium mb-2">Yem Tipi Adı</label>
                    <input type="text" id="yem-tipi" name="yem_tipi" class="input-field" required placeholder="Örn: Süt Yemi (Çuval)">
                </div>
                <div class="mb-4">
                    <label for="yem-alis-fiyati" class="block text-sm font-medium mb-2">Alış Fiyatı (Birim Başına)</label>
                    <input type="number" step="0.01" id="yem-alis-fiyati" name="alis_fiyati" class="input-field" required>
                </div>
                <div class="mb-4">
                    <label for="yem-satis-fiyati" class="block text-sm font-medium mb-2">Satış Fiyatı (Birim Başına)</label>
                    <input type="number" step="0.01" id="yem-satis-fiyati" name="satis_fiyati" class="input-field" required>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" data-modal-id="yem-tarife-modal">İptal</button>
                <button type="submit" class="btn-success-filled">Kaydet</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/tarife_yonetimi.js') }}"></script>
{% endblock %}